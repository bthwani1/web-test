# 👤 دليل إنشاء حساب الأدمن - Rahla Store

## 🎯 إنشاء حساب أدمن جديد

### 📋 المتطلبات

#### 1. متغيرات البيئة المطلوبة
```bash
# في ملف .env
ADMIN_NAME=Owner
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=SecurePassword123
ADMIN_ROLE=owner
MONGODB_URI=mongodb+srv://...
```

#### 2. متطلبات كلمة المرور
- ✅ **8 أحرف على الأقل**
- ✅ **مزيج من الأحرف والأرقام**
- ✅ **أحرف كبيرة وصغيرة**

#### 3. متطلبات البريد الإلكتروني
- ✅ **تنسيق صحيح**: user@domain.com
- ✅ **فريد**: غير مستخدم من قبل

### 🚀 خطوات إنشاء حساب الأدمن

#### 1. إعداد متغيرات البيئة

##### في ملف .env:
```bash
# معلومات الأدمن
ADMIN_NAME=Owner
ADMIN_EMAIL=admin@rahla.com
ADMIN_PASSWORD=ChangeMe123
ADMIN_ROLE=owner

# قاعدة البيانات
MONGODB_URI=mongodb+srv://bthwani2_db_user:ZTvLB2wQcB7FpfjB@rahla-cluster.qvnzltw.mongodb.net/rahla?retryWrites=true&w=majority
```

#### 2. تشغيل سكريبت إنشاء الأدمن

##### في مجلد rahla-api:
```bash
cd rahla-api
npm run seed
```

##### أو مباشرة:
```bash
node seed-admin.js
```

#### 3. التحقق من النجاح

##### النتيجة المتوقعة:
```
🔗 الاتصال بقاعدة البيانات...
🔍 فحص وجود الأدمن...
🔐 تشفير كلمة المرور...
👤 إنشاء حساب الأدمن...
✅ تم إنشاء حساب الأدمن بنجاح!
📧 البريد الإلكتروني: admin@rahla.com
👤 الاسم: Owner
🔑 الدور: owner
🆔 المعرف: 507f1f77bcf86cd799439011
📅 تاريخ الإنشاء: 2024-01-01T00:00:00.000Z

🚀 يمكنك الآن تسجيل الدخول باستخدام:
📧 البريد: admin@rahla.com
🔑 كلمة المرور: ChangeMe123
```

### 🔐 أنواع الأدوار المتاحة

#### 1. Owner (مالك)
- ✅ **جميع الصلاحيات**
- ✅ **إدارة المستخدمين**
- ✅ **إعدادات النظام**
- ✅ **حذف البيانات**

#### 2. Admin (مدير)
- ✅ **إدارة المنتجات والفئات**
- ✅ **رفع الملفات**
- ✅ **تصدير/استيراد البيانات**
- ❌ **لا يمكن حذف المستخدمين**

#### 3. Editor (محرر)
- ✅ **إدارة المنتجات**
- ✅ **رفع الملفات**
- ❌ **لا يمكن حذف المنتجات**
- ❌ **لا يمكن إدارة المستخدمين**

#### 4. Viewer (مشاهد)
- ✅ **قراءة فقط**
- ❌ **لا يمكن التعديل**

### 🛠️ إدارة حسابات الأدمن

#### 1. إنشاء أدمن إضافي
```bash
# تغيير متغيرات البيئة
ADMIN_NAME=Manager
ADMIN_EMAIL=manager@rahla.com
ADMIN_PASSWORD=ManagerPass123
ADMIN_ROLE=admin

# تشغيل السكريبت
npm run seed
```

#### 2. تحديث كلمة المرور
```bash
# تغيير كلمة المرور في .env
ADMIN_PASSWORD=NewPassword123

# تشغيل السكريبت (سيحدث كلمة المرور)
npm run seed
```

#### 3. حذف حساب أدمن
```bash
# استخدام MongoDB مباشرة
mongo "mongodb+srv://..."
db.users.deleteOne({email: "admin@rahla.com"})
```

### 🔒 الأمان

#### 1. نصائح أمنية
- ✅ **استخدم كلمات مرور قوية**
- ✅ **غير كلمة المرور بانتظام**
- ✅ **لا تشارك بيانات الدخول**
- ✅ **استخدم HTTPS فقط**

#### 2. مراقبة النشاط
- ✅ **تسجيل جميع العمليات**
- ✅ **مراقبة محاولات الدخول**
- ✅ **تنبيهات الأمان**

### 📊 اختبار حساب الأدمن

#### 1. تسجيل الدخول
```bash
# اختبار API
curl -X POST https://your-api.onrender.com/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "admin@rahla.com",
    "password": "ChangeMe123"
  }'
```

#### 2. التحقق من الصلاحيات
```bash
# اختبار الصلاحيات
curl -X GET https://your-api.onrender.com/auth/me \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### 🚨 استكشاف الأخطاء

#### 1. خطأ في الاتصال بقاعدة البيانات
```
❌ خطأ: يجب تعيين MONGODB_URI في ملف .env
```
**الحل**: تأكد من صحة رابط MongoDB

#### 2. خطأ في كلمة المرور
```
❌ خطأ: كلمة المرور يجب أن تكون 8 أحرف على الأقل
```
**الحل**: استخدم كلمة مرور أقوى

#### 3. خطأ في البريد الإلكتروني
```
❌ خطأ: البريد الإلكتروني غير صحيح
```
**الحل**: استخدم تنسيق صحيح للبريد

#### 4. الأدمن موجود بالفعل
```
⚠️ الأدمن موجود بالفعل: admin@rahla.com
```
**الحل**: استخدم بريد إلكتروني مختلف أو احذف الحساب الموجود

### ✅ النتيجة النهائية

**حساب الأدمن جاهز للاستخدام!**

#### المميزات المحققة:
- ✅ **حساب آمن**: كلمة مرور مشفرة
- ✅ **صلاحيات كاملة**: دور Owner
- ✅ **تسجيل الدخول**: جاهز للاستخدام
- ✅ **مراقبة النشاط**: تسجيل جميع العمليات

#### الخطوات التالية:
1. سجل دخولك باستخدام البيانات
2. اختبر جميع الوظائف
3. أضف منتجات جديدة
4. راقب النشاط

**حساب الأدمن جاهز للعمل! 🎉**
